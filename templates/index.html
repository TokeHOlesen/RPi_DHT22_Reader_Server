<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Data</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/stylesheet.css') }}">
    <script>
        function updateData() {
            fetch('/latest')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('temp').innerText = data.temp || "--";
                    document.getElementById('hum').innerText = data.hum || "--";

                    // Trigger fade-in effect on the status dot
                    const statusDot = document.getElementById('status-dot');
                    statusDot.classList.add('flash');

                    // Remove flash class after 150ms to create a quick fade effect
                    setTimeout(() => {
                        statusDot.classList.remove('flash');
                    }, 150);
                })
                .catch(error => console.error('Error fetching data:', error));
        }
        
        setInterval(updateData, 1000);
        window.onload = updateData;
    </script>
</head>
<body>
    <div class="data-box">
        <div class="status-dot" id="status-dot"></div> <!-- Small flashing dot -->
        <div class="data-display"><span id="temp">--</span></div>
        <div class="data-display"><span id="hum">--</span></div>
    </div>

    <!-- Link container positioned directly under the data box -->
    <div class="link-container">
        <a href="/history?hours=1" class="link-box">Ostania godzina</a>
        <a href="/history?hours=6" class="link-box">Ostatnie 6 godzin</a>
        <a href="/history?hours=12" class="link-box">Ostatnie 12 godzin</a>
        <a href="/history?hours=24" class="link-box">Ostatnie 24 godziny</a>
        <a href="/history?hours=168" class="link-box">Ostatni tydzie≈Ñ</a>
    </div>
</body>
</html>
